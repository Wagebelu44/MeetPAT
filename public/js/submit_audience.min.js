$(document).ready(function(){var e=$("#submit_audience"),o=$("#upload-custom-audience"),t=$("#google_custom_audience"),n=$("#facebook_custom_audience"),a=$("#google-sync-status"),c=($("#facebook-sync-status"),$("#audience_name")),s=$("#filtered_audience_id").val(),i=$("#user_id").val(),u=function(e){var o=(new Date).getTime();return e=e.replace(/ /g,"_")+"_"+o},d=function(e,o,t){var n=!1;t.val()&&t.val().match(/^[a-zA-Z0-9 \_]*$/)&&(e.is(":checked")||o.is(":checked"))&&(n=!0),n?$("#submit_audience").prop("disabled",!1):$("#submit_audience").prop("disabled",!0)};$("#facebook_custom_audience").change(function(){d($("#google_custom_audience"),$("#facebook_custom_audience"),$("#audience_name"))}),$("#google_custom_audience").change(function(){d($("#google_custom_audience"),$("#facebook_custom_audience"),$("#audience_name"))}),$("#audience_name").keyup(function(){d($("#google_custom_audience"),$("#facebook_custom_audience"),$("#audience_name"))});var l=function(e){"google"==e?(a.show(),$("#google-sync-status .status-text").html("Syncing&nbsp;"),$.post("/api/meetpat-client/submit-audience/run-job-google",{user_id:i,filtered_audience_id:s},function(){}).fail(function(e){$("#google-sync-status .status-text").addClass("text-danger"),$("#google-sync-status .status-text").html('error&nbsp;<i class="far fa-times-circle"></i>'),$("#google-sync-status .status-loader").remove(),console.log(e)}).done(function(e){console.log(e),$("#google-sync-status .status-text").addClass("text-success"),$("#google-sync-status .status-text").html('complete&nbsp;<i class="fas fa-check-square"></i>'),$("#google-sync-status .status-loader").remove()})):console.log("Erro: Platform does not exist.")};e.click(function(){$("#submit_audience").prop("disabled",!0),$("#submit_audience").html(' <span class="spinner-border spinner-border-sm" style="margin-bottom: 4px;" role="status" aria-hidden="true"></span>&nbsp;Submitting Audience'),t=$("#google_custom_audience"),n=$("#facebook_custom_audience"),c=$("#audience_name").val(),t.is(":checked")?$.post("/api/meetpat-client/submit-audience/add-to-que",{user_id:i,filtered_audience_id:s,platform:"google",audience_name:u(c)},function(){}).fail(function(e){console.log(e)}).done(function(e){console.log(e),l("google"),$("#submit_audience").html("Done"),n.is(":checked")&&$.post("/api/meetpat-client/submit-audience/add-to-que",{user_id:i,filtered_audience_id:s,platform:"facebook",audience_name:u(c)},function(){}).fail(function(e){console.log(e)}).done(function(e){l("facebook"),console.log(e)}),o.hide()}):n.is(":checked")?$.post("/api/meetpat-client/submit-audience/add-to-que",{user_id:i,filtered_audience_id:s,platform:"facebook",audience_name:u(c)},function(){}).fail(function(e){console.log(e)}).done(function(e){console.log(e),l("facebook"),o.hide()}):console.log("error: no platform has been selected.")})});