google.charts.load("current",{packages:["corechart","geochart","bar"],mapsApiKey:"AIzaSyBMae5h5YHUJ1BdNHshwj_SmJzPe5mglwI"});var target_provinces=[],target_municipalities=[],target_areas=[],target_ages=[],target_genders=[],target_population_groups=[],target_generations=[],target_citizen_vs_residents=[],target_marital_statuses=[],target_home_owners=[],target_risk_categories=[],target_incomes=[],target_directors=[],checkForFilters=function(){target_provinces_el=document.getElementById("province_filters");var e=document.getElementById("municipality_filters");target_areas_el=document.getElementById("area_filters");var t=document.getElementById("age_filters");target_genders_el=document.getElementById("gender_filters");var a=document.getElementById("population_group_filters");target_generations_el=document.getElementById("generation_filters");var r=document.getElementById("citizen_vs_resident_filters");target_marital_statuses_el=document.getElementById("marital_status_filters");var s=document.getElementById("home_owner_filters");target_risk_categories_el=document.getElementById("risk_category_filters");var i=document.getElementById("household_income_filters");target_directors_el=document.getElementById("directors_filters"),target_provinces_el.childNodes.length>1||e.childNodes.length>1||target_areas_el.childNodes.length>1||t.childNodes.length>1||target_genders_el.childNodes.length>1||a.childNodes.length>1||target_generations_el.childNodes.length>1||r.childNodes.length>1||target_marital_statuses_el.childNodes.length>1||s.childNodes.length>1||target_risk_categories_el.childNodes.length>1||i.childNodes.length>1||target_directors_el.childNodes.length>1?$("#no_filters").hide():$("#no_filters").show(),target_provinces_el.childNodes.length>1?$("#province_filters").show():$("#province_filters").hide(),e.childNodes.length>1?$("#municipality_filters").show():$("#municipality_filters").hide(),target_areas_el.childNodes.length>1?$("#area_filters").show():$("#area_filters").hide(),t.childNodes.length>1?$("#age_filters").show():$("#age_filters").hide(),target_genders_el.childNodes.length>1?$("#gender_filters").show():$("#gender_filters").hide(),a.childNodes.length>1?$("#population_group_filters").show():$("#population_group_filters").hide(),target_generations_el.childNodes.length>1?$("#generation_filters").show():$("#generation_filters").hide(),r.childNodes.length>1?$("#citizen_vs_resident_filters").show():$("#citizen_vs_resident_filters").hide(),target_marital_statuses_el.childNodes.length>1?$("#marital_status_filters").show():$("#marital_status_filters").hide(),s.childNodes.length>1?$("#home_owner_filters").show():$("#home_owner_filters").hide(),target_risk_categories_el.childNodes.length>1?$("#risk_category_filters").show():$("#risk_category_filters").hide(),i.childNodes.length>1?$("#household_income_filters").show():$("#household_income_filters").hide(),target_directors_el.childNodes.length>1?$("#directors_filters").show():$("#directors_filters").hide()};function kFormatter(e){return e>999?(e/1e3).toFixed(1)+"k":e.toString()}function drawProvinceChart(e){$("#province-graph .spinner-block").hide();var t=new google.visualization.DataTable;t.addColumn("string","Province"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e).map(function(t){var a;switch(t){case"G":a=["Gauteng",e[t],kFormatter(e[t])];break;case"EC":a=["Eastern Cape",e[t],kFormatter(e[t])];break;case"NC":a=["Northern Cape",e[t],kFormatter(e[t])];break;case"FS":a=["Free State",e[t],kFormatter(e[t])];break;case"L":a=["Limpopo",e[t],kFormatter(e[t])];break;case"KN":a=["KwaZulu Natal",e[t],kFormatter(e[t])];break;case"M":a=["Mpumalanga",e[t],kFormatter(e[t])];break;case"NW":a=["North West",e[t],kFormatter(e[t])];break;case"WC":a=["Western Cape",e[t],kFormatter(e[t])];break;default:a=[t,e[t],kFormatter(e[t])]}return a});t.addRows(a);var r={height:25*a.length,width:"100%",fontSize:10,chartArea:{width:"60%",height:"100%"},legend:{position:"none"},backgroundColor:"#fff",colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"}};new google.visualization.BarChart(document.getElementById("provincesChart")).draw(t,r)}function drawAreaChart(){$.get("/api/meetpat-client/get-records/areas",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#area-graph .spinner-block").hide(),$("#areaSubmitBtn").prop("disabled",!1),$("#area_filter").append('<div id="lunr-search" style="display: none;"><input type="text" class="form-control mb-2" id="areaSearchInput" autocomplete="off" placeholder="search for area..."><span style="position:absolute; right: 40px; top:35px;"><i class="fas fa-search"></i></span><ul id="lunr-results" class="list-unstyled"></ul></div>');var t=new google.visualization.DataTable;t.addColumn("string","Area"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_areas).map(function(t){return[t,e.selected_areas[t],kFormatter(e.selected_areas[t])]}).slice(0,20);t.addRows(a);var r={width:"100%",height:25*a.length,fontSize:10,chartArea:{width:"60%",height:"100%"},colors:["#00A3D9"],legend:{position:"none"},backgroundColor:"#fff"};new google.visualization.BarChart(document.getElementById("areasChart")).draw(t,r);var s=Object.keys(e.all_areas).map(function(t){return{name:t,count:kFormatter(e.all_areas[t])}}),i=lunr(function(){this.ref("name"),this.field("name"),this.b(1),s.forEach(function(e){this.add(e)},this)});$("#lunr-search").show(),$("#area-filter-form .text-center").remove(),document.getElementById("areaSearchInput").addEventListener("keyup",function(){i.search(this.value)?($("#lunr-results").empty(),i.search(this.value).forEach(function(t){t.score&&($("#area_hidden_"+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").length?($("#lunr-results").append('<input type="checkbox" name="'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'" id="area_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" value="'+t.ref+'" class="css-checkbox" checked="checked"><label for="area_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" class="css-label">'+t.ref+"</label><br />"),$("#area_"+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").click(function(){if($("#area_"+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").is(":checked")){var a=this;$("#hidden-area-filter-form").append('<input type="checkbox" name="hidden_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'" id="area_hidden_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" value="'+t.ref+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" class="css-label">'+t.ref+"<small> "+kFormatter(e.all_areas[t.ref])+'" checked="checked">'),$("#area_filters").append('<li id="filter_area_'+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+" i").click(function(){$("#area_hidden_"+$(a).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").length&&($("#filter_area_"+$(a).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")).remove(),$("#area_hidden_"+$(a).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").remove(),$("#area_"+$(a).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,""))&&($("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")).remove(),$("#area_hidden_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").remove());checkForFilters()})):($("#lunr-results").append('<input type="checkbox" name="'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'" id="area_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" value="'+t.ref+'" class="css-checkbox"><label for="area_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" class="css-label">'+t.ref+"<small> "+kFormatter(e.all_areas[t.ref])+"</small></label><br />"),$("#area_"+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").click(function(){if($("#area_"+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").is(":checked")){var e=this;$("#hidden-area-filter-form").append('<input type="checkbox" name="hidden_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'" id="area_hidden_'+t.ref.toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'_option" value="'+t.ref+'" checked="checked">'),$("#area_filters").append('<li id="filter_area_'+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+" i").click(function(){$("#area_hidden_"+$(e).attr("name").toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").length&&($("#filter_area_"+$(e).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")).remove(),$("#area_hidden_"+$(e).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").remove(),$("#area_"+$(e).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,""))&&($("#filter_area_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")).remove(),$("#area_hidden_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\'/g,"")+"_option").remove());checkForFilters()})))})):$("#lunr-results").empty()})})}var drawMunicipalityChart=function(e){$("#municipality-graph .spinner-block").hide();var t=new google.visualization.DataTable;t.addColumn("string","Municipality"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_municipalities).map(function(t){return[t,e.selected_municipalities[t],kFormatter(e.selected_municipalities[t])]});t.addRows(a);var r={height:25*a.length,width:"100%",fontSize:10,chartArea:{width:"60%",height:"100%"},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"};for(var s in e.all_municipalities)target_municipalities.includes(s)?$("#municipality_filter").append('<input type="checkbox" name="'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'" id="municipality_'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="municipality_'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'_option" class="css-label">'+s+"</label><br />"):$("#municipality_filter").append('<input type="checkbox" name="'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'" id="municipality_'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'_option" value="'+s+'" class="css-checkbox"><label for="municipality_'+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'_option" class="css-label">'+s+"</label><br />"),$("#municipality_"+s.toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+"_option").click(function(){if($("#municipality_"+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+"_option").is(":checked")){var e=this;$("#municipality_filters").append('<li id="filter_municipality_'+$(this).attr("name").toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_municipality_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+" i").click(function(){$("#municipality_"+$(e).attr("name").toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+"_option").length&&($("#filter_municipality_"+$(e).val().toLowerCase().replace(/ /g,"_").replace(/\./g,"_")).remove(),$("#municipality_"+$(e).val().toLowerCase().replace(/ /g,"_").replace(/\./g,"_")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_municipality_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\./g,"_"))&&$("#filter_municipality_"+$(this).val().toLowerCase().replace(/ /g,"_").replace(/\./g,"_")).remove();checkForFilters()});new google.visualization.BarChart(document.getElementById("municipalityChart")).draw(t,r),drawAreaChart()},drawMapChart=function(e){$("#map-graph .spinner-block").hide();var t=Object.keys(e).map(function(t){var a;switch(t){case"G":a=["ZA-GT",e[t],'<ul class="list-unstyled"><li><b>Gauteng</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"WC":a=["ZA-WC",e[t],'<ul class="list-unstyled"><li><b>Western Cape</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"EC":a=["ZA-EC",e[t],'<ul class="list-unstyled"><li><b>Eastern Cape</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"M":a=["ZA-MP",e[t],'<ul class="list-unstyled"><li><b>Mpumalanga</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"FS":a=["ZA-FS",e[t],'<ul class="list-unstyled"><li><b>Free State</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"L":a=["ZA-LP",e[t],'<ul class="list-unstyled"><li><b>Limpopo</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"KN":a=["ZA-NL",e[t],'<ul class="list-unstyled"><li><b>KwaZula Natal</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"NW":a=["ZA-NW",e[t],'<ul class="list-unstyled"><li><b>North West Province</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;case"NC":a=["ZA-NC",e[t],'<ul class="list-unstyled"><li><b>Northern Cape</b></li><li>'+kFormatter(e[t])+"</li></ul>"];break;default:a=""}return a});t.unshift(["Provinces","Popularity",{role:"tooltip",p:{html:!0}}]);var a=t.filter(function(e){return""!=e}),r=google.visualization.arrayToDataTable(a);new google.visualization.GeoChart(document.getElementById("chartdiv")).draw(r,{region:"ZA",resolution:"provinces",backgroundColor:"#fff",colorAxis:{colors:["#039be5"]},tooltip:{isHtml:!0}})},drawAgeChart=function(){$.get("/api/meetpat-client/get-records/ages",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#age-graph .spinner-block").hide(),$("#age_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Age"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_ages).map(function(t){return[t,e.selected_ages[t],kFormatter(e.selected_ages[t])]});t.addRows(a);var r={height:25*a.length,width:"100%",fontSize:10,chartArea:{width:"60%",height:"100%"},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"};for(var s in e.all_ages)target_ages.includes(s)?$("#age_filter").append('<input type="checkbox" name="'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'" id="age_'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="age_'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'_option" class="css-label">'+s+"</label><br />"):$("#age_filter").append('<input type="checkbox" name="'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'" id="age_'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'_option" value="'+s+'" class="css-checkbox"><label for="age_'+s.toLowerCase().replace(/ /g,"_").replace("+","plus")+'_option" class="css-label">'+s+"</label><br />"),$("#age_"+s.toLowerCase()+"_option").click(function(){if($("#age_"+$(this).attr("name").toLowerCase()+"_option").is(":checked")){var e=this;$("#age_filters").append('<li id="filter_age_'+$(this).attr("name").toLowerCase()+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_age_"+$(this).val().toLowerCase()+" i").click(function(){$("#age_"+$(e).attr("name").toLowerCase()+"_option").length&&($("#filter_age_"+$(e).val().toLowerCase()).remove(),$("#age_"+$(e).val().toLowerCase()+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_age_"+$(this).val().toLowerCase())&&$("#filter_age_"+$(this).val().toLowerCase()).remove();checkForFilters()});new google.visualization.BarChart(document.getElementById("agesChart")).draw(t,r)})},drawGenderChart=function(){var e=function(e){var t;switch(e){case"M":t="Male";break;case"F":t="Female";break;default:t="Unkown"}return t};$.get("/api/meetpat-client/get-records/genders",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(t){$("#gender-graph .spinner-block").hide(),$("#gender_filter").empty();var a=new google.visualization.DataTable;a.addColumn("string","Gender"),a.addColumn("number","Records"),a.addColumn({type:"string",role:"annotation"});var r=Object.keys(t.selected_genders).map(function(e){return[e,t.selected_genders[e],kFormatter(t.selected_genders[e])]});a.addRows(r);for(var s in t.all_genders)target_genders.includes(s)?$("#gender_filter").append('<input type="checkbox" name="g_'+s+'" id="g_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="g_'+s.toLowerCase()+'_option" class="css-label">'+e(s)+"</label><br />"):$("#gender_filter").append('<input type="checkbox" name="g_'+s+'" id="g_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox"><label for="g_'+s.toLowerCase()+'_option" class="css-label">'+e(s)+"</label><br />"),$("#g_"+s.toLowerCase()+"_option").click(function(){if($("#g_"+$(this).val().toLowerCase()+"_option").is(":checked")){var t=this;$("#gender_filters").append('<li id="filter_g_'+$(this).val().toLowerCase()+'">'+e($(this).val())+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_g_"+$(this).val().toLowerCase()+" i").click(function(){$("#g_"+$(t).val().toLowerCase()+"_option").length&&($("#filter_g_"+$(t).val().toLowerCase()).remove(),$("#g_"+$(t).val().toLowerCase()+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_g_"+$(this).val().toLowerCase())&&$("#filter_g_"+$(this).val().toLowerCase()).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("genderChart")).draw(a,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawPopulationChart=function(){var e=function(e){var t;switch(e){case"B":t="Black";break;case"W":t="White";break;case"C":t="Coloured";break;case"A":t="Asian";break;default:t="Unkown"}return t};$.get("/api/meetpat-client/get-records/population-groups",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(t){$("#population-graph .spinner-block").hide(),$("#population_group_filter").empty();var a=new google.visualization.DataTable;a.addColumn("string","Group"),a.addColumn("number","Records"),a.addColumn({type:"string",role:"annotation"});var r=Object.keys(t.selected_population_groups).map(function(e){return[e,t.selected_population_groups[e],kFormatter(t.selected_population_groups[e])]});a.addRows(r);for(var s in t.all_population_groups)target_population_groups.includes(s)?$("#population_group_filter").append('<input type="checkbox" name="pop_'+s+'" id="pop_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="pop_'+s.toLowerCase()+'_option" class="css-label">'+e(s)+"</label><br />"):$("#population_group_filter").append('<input type="checkbox" name="pop_'+s+'" id="pop_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox"><label for="pop_'+s.toLowerCase()+'_option" class="css-label">'+e(s)+"</label><br />"),$("#pop_"+s.toLowerCase()+"_option").click(function(){if($("#pop_"+$(this).val().toLowerCase()+"_option").is(":checked")){var t=this;$("#population_group_filters").append('<li id="filter_pop_'+$(this).val().toLowerCase()+'">'+e($(this).val())+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_pop_"+$(this).val().toLowerCase()+" i").click(function(){$("#pop_"+$(t).val().toLowerCase()+"_option").length&&($("#filter_pop_"+$(t).val().toLowerCase()).remove(),$("#pop_"+$(t).val().toLowerCase()+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_pop_"+$(this).val().toLowerCase())&&$("#filter_pop_"+$(this).val().toLowerCase()).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("populationGroupChart")).draw(a,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawGenerationChart=function(){$.get("/api/meetpat-client/get-records/generations",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#generation-graph .spinner-block").hide(),$("#generation_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Generation"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_generations).map(function(t){return[t,e.selected_generations[t],kFormatter(e.selected_generations[t])]});t.addRows(a);for(var r in e.all_generations)target_generations.includes(r)?$("#generation_filter").append('<input type="checkbox" name="gen_'+r+'" id="gen_'+r.toLowerCase().replace(/ /g,"_")+'_option" value="'+r+'" class="css-checkbox" checked="checked"><label for="gen_'+r.toLowerCase().replace(/ /g,"_")+'_option" class="css-label">'+r+"</label><br />"):$("#generation_filter").append('<input type="checkbox" name="gen_'+r+'" id="gen_'+r.toLowerCase().replace(/ /g,"_")+'_option" value="'+r+'" class="css-checkbox"><label for="gen_'+r.toLowerCase().replace(/ /g,"_")+'_option" class="css-label">'+r+"</label><br />"),$("#gen_"+r.toLowerCase().replace(/ /g,"_")+"_option").click(function(){if($("#gen_"+$(this).val().toLowerCase().replace(/ /g,"_")+"_option").is(":checked")){var e=this;$("#generation_filters").append('<li id="filter_gen_'+$(this).val().toLowerCase().replace(/ /g,"_")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_gen_"+$(this).val().toLowerCase().replace(/ /g,"_")+" i").click(function(){$("#gen_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").length&&($("#filter_gen_"+$(e).val().toLowerCase().replace(/ /g,"_")).remove(),$("#gen_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_gen_"+$(this).val().toLowerCase().replace(/ /g,"_"))&&$("#filter_gen_"+$(this).val().toLowerCase().replace(/ /g,"_")).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("generationChart")).draw(t,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawCitizensChart=function(){$.get("/api/meetpat-client/get-records/citizens-and-residents",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#c-vs-r-graph .spinner-block").hide(),$("#citizen_vs_resident_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Citizen or Resident"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e).map(function(t){return[t,e[t],kFormatter(e[t])]});t.addRows(a);target_citizen_vs_residents.includes("citizen")?$("#citizen_vs_resident_filter").append('<input type="checkbox" name="citizen" id="citizen_option" value="citizen" class="css-checkbox" checked="checked"><label for="citizen_option" class="css-label">Citizen</label><br />'):$("#citizen_vs_resident_filter").append('<input type="checkbox" name="citizen" id="citizen_option" value="citizen" class="css-checkbox"><label for="citizen_option" class="css-label">Citizen</label><br />'),target_citizen_vs_residents.includes("resident")?$("#citizen_vs_resident_filter").append('<input type="checkbox" name="resident" id="resident_option" value="resident" class="css-checkbox" checked="checked"><label for="resident_option" class="css-label">Resident</label><br />'):$("#citizen_vs_resident_filter").append('<input type="checkbox" name="resident" id="resident_option" value="resident" class="css-checkbox"><label for="resident_option" class="css-label">Resident</label><br />'),$("#citizen_option").click(function(){$("#citizen_option").is(":checked")?($("#generation_filters").append('<li id="filter_citizen_option">Citizen<i class="fas fa-window-close float-right"></i></li>'),$("#filter_citizen_option i").click(function(){$("#filter_citizen_option")&&($("#filter_citizen_option").remove(),$("#citizen_option").prop("checked",!1)),checkForFilters()})):$("#filter_citizen_option")&&$("#filter_citizen_option").remove(),checkForFilters()}),$("#resident_option").click(function(){$("#resident_option").is(":checked")?($("#generation_filters").append('<li id="filter_resident_option">Resident<i class="fas fa-window-close float-right"></i></li>'),$("#filter_resident_option i").click(function(){$("#filter_resident_option")&&($("#filter_resident_option").remove(),$("#resident_option").prop("checked",!1)),checkForFilters()})):$("#filter_resident_option")&&$("#filter_resident_option").remove(),checkForFilters()}),new google.visualization.ColumnChart(document.getElementById("citizensVsResidentsChart")).draw(t,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawMaritalStatusChart=function(){$.get("/api/meetpat-client/get-records/marital-statuses",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#marital-status-graph .spinner-block").hide(),$("#marital_status_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Marital Status"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_marital_status).map(function(t){return[t,e.selected_marital_status[t],kFormatter(e.selected_marital_status[t])]});t.addRows(a);for(var r in e.all_marital_status)target_marital_statuses.includes(r)?$("#marital_status_filter").append('<input type="checkbox" name="m_'+r+'" id="m_'+r+'_option" value="'+r+'" class="css-checkbox" checked="checked"><label for="m_'+r+'_option" class="css-label">'+r+"</label><br />"):$("#marital_status_filter").append('<input type="checkbox" name="m_'+r+'" id="m_'+r+'_option" value="'+r+'" class="css-checkbox"><label for="m_'+r+'_option" class="css-label">'+r+"</label><br />"),$("#m_"+r.toLowerCase()+"_option").click(function(){if($("#m_"+$(this).val().toLowerCase()+"_option").is(":checked")){var e=this;$("#marital_status_filters").append('<li id="filter_m_'+$(this).val().toLowerCase()+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_m_"+$(this).val().toLowerCase()+" i").click(function(){$("#m_"+$(e).val().toLowerCase()+"_option").length&&($("#filter_m_"+$(e).val().toLowerCase()).remove(),$("#m_"+$(e).val().toLowerCase()+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_m_"+$(this).val().toLowerCase())&&$("#filter_m_"+$(this).val().toLowerCase()).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("maritalStatusChart")).draw(t,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawHomeOwnerChart=function(){$.get("/api/meetpat-client/get-records/home-owner",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#home-owner-graph .spinner-block").hide(),$("#home_owner_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Home Owner Status"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_home_owners).map(function(t){return[t,e.selected_home_owners[t],kFormatter(e.selected_home_owners[t])]});t.addRows(a);for(var r in e.all_home_owners)target_home_owners.includes(r)?$("#home_owner_filter").append('<input type="checkbox" name="h_'+r+'" id="h_'+r+'_option" value="'+r+'" class="css-checkbox" checked="checked"><label for="h_'+r+'_option" class="css-label">'+r+"</label><br />"):$("#home_owner_filter").append('<input type="checkbox" name="h_'+r+'" id="h_'+r+'_option" value="'+r+'" class="css-checkbox"><label for="h_'+r+'_option" class="css-label">'+r+"</label><br />"),$("#h_"+r.toLowerCase().replace(/ /g,"_")+"_option").click(function(){if($("#h_"+$(this).val().toLowerCase().replace(/ /g,"_")+"_option").is(":checked")){var e=this;$("#home_owner_filters").append('<li id="filter_h_'+$(this).val().toLowerCase().replace(/ /g,"_")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_h_"+$(this).val().toLowerCase().replace(/ /g,"_")+" i").click(function(){$("#h_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").length&&($("#filter_h_"+$(e).val().toLowerCase().replace(/ /g,"_")).remove(),$("#h_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_h_"+$(this).val().toLowerCase().replace(/ /g,"_"))&&$("#filter_h_"+$(this).val().toLowerCase().replace(/ /g,"_")).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("homeOwnerChart")).draw(t,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"})})},drawRiskCategoryChart=function(){$.get("/api/meetpat-client/get-records/risk-category",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#risk-category-graph .spinner-block").hide(),$("#risk_category_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Age"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_risk_categories).map(function(t){return[t,e.selected_risk_categories[t],kFormatter(e.selected_risk_categories[t])]});t.addRows(a);var r={height:25*a.length,width:"100%",fontSize:10,chartArea:{width:"50%",height:"100%"},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"};for(var s in e.all_risk_categories)target_risk_categories.includes(s)?$("#risk_category_filter").append('<input type="checkbox" name="r_'+s+'" id="r_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="r_'+s.toLowerCase()+'_option" class="css-label">'+s+"</label><br />"):$("#risk_category_filter").append('<input type="checkbox" name="r_'+s+'" id="r_'+s.toLowerCase()+'_option" value="'+s+'" class="css-checkbox"><label for="r_'+s.toLowerCase()+'_option" class="css-label">'+s+"</label><br />"),$("#r_"+s.toLowerCase().replace(/ /g,"_")+"_option").click(function(){if($("#r_"+$(this).val().toLowerCase().replace(/ /g,"_")+"_option").is(":checked")){var e=this;$("#risk_category_filters").append('<li id="filter_r_'+$(this).val().toLowerCase().replace(/ /g,"_")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_r_"+$(this).val().toLowerCase().replace(/ /g,"_")+" i").click(function(){$("#r_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").length&&($("#filter_r_"+$(e).val().toLowerCase().replace(/ /g,"_")).remove(),$("#r_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_r_"+$(this).val().toLowerCase().replace(/ /g,"_"))&&$("#filter_r_"+$(this).val().toLowerCase().replace(/ /g,"_")).remove();checkForFilters()});new google.visualization.BarChart(document.getElementById("riskCategoryChart")).draw(t,r)})},drawHouseholdIncomeChart=function(){$.get("/api/meetpat-client/get-records/household-income",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#income-graph .spinner-block").hide(),$("#household_income_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Income"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_household_incomes).map(function(t){return[t,e.selected_household_incomes[t],kFormatter(e.selected_household_incomes[t])]});t.addRows(a);var r={height:25*a.length,width:"100%",fontSize:10,chartArea:{width:"40%",height:"100%"},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"};for(var s in e.all_household_incomes)target_incomes.includes(s)?$("#household_income_filter").append('<input type="checkbox" name="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'" id="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'_option" value="'+s+'" class="css-checkbox" checked="checked"><label for="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'_option" class="css-label">'+s+"</label><br />"):$("#household_income_filter").append('<input type="checkbox" name="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'" id="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'_option" value="'+s+'" class="css-checkbox"><label for="hi_'+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'_option" class="css-label">'+s+"</label><br />"),$("#hi_"+s.toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+"_option").click(function(){if($("#hi_"+$(this).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+"_option").is(":checked")){var e=this;$("#household_income_filters").append('<li id="filter_hi_'+$(this).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_hi_"+$(this).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+" i").click(function(){$("#hi_"+$(e).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+"_option").length&&($("#filter_hi_"+$(e).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")).remove(),$("#hi_"+$(e).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_hi_"+$(this).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus"))&&$("#filter_hi_"+$(this).val().toLowerCase().replace(/ /g,"_").replace("-","").replace("+","plus")).remove();checkForFilters()});new google.visualization.BarChart(document.getElementById("householdIncomeChart")).draw(t,r)})},drawDirectorOfBusinessChart=function(){$.get("/api/meetpat-client/get-records/director-of-business",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){console.log(e)}).done(function(e){$("#directors-graph .spinner-block").hide(),$("#directors_filter").empty();var t=new google.visualization.DataTable;t.addColumn("string","Director of Business"),t.addColumn("number","Records"),t.addColumn({type:"string",role:"annotation"});var a=Object.keys(e.selected_directors).map(function(t){return[t,e.selected_directors[t],kFormatter(e.selected_directors[t])]});t.addRows(a);for(var r in e.all_directors)target_directors.includes(r)?$("#directors_filter").append('<input type="checkbox" name="d_'+r+'" id="d_'+r.toLowerCase()+'_option" value="'+r+'" class="css-checkbox" checked="checked"><label for="d_'+r.toLowerCase()+'_option" class="css-label">'+r+"</label><br />"):$("#directors_filter").append('<input type="checkbox" name="d_'+r+'" id="d_'+r.toLowerCase()+'_option" value="'+r+'" class="css-checkbox"><label for="d_'+r.toLowerCase()+'_option" class="css-label">'+r+"</label><br />"),$("#d_"+r.toLowerCase().replace(/ /g,"_")+"_option").click(function(){if($("#d_"+$(this).val().toLowerCase().replace(/ /g,"_")+"_option").is(":checked")){var e=this;$("#directors_filters").append('<li id="filter_d_'+$(this).val().toLowerCase().replace(/ /g,"_")+'">'+$(this).val()+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_d_"+$(this).val().toLowerCase().replace(/ /g,"_")+" i").click(function(){$("#d_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").length&&($("#filter_d_"+$(e).val().toLowerCase().replace(/ /g,"_")).remove(),$("#d_"+$(e).val().toLowerCase().replace(/ /g,"_")+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_d_"+$(this).val().toLowerCase().replace(/ /g,"_"))&&$("#filter_d_"+$(this).val().toLowerCase().replace(/ /g,"_")).remove();checkForFilters()});new google.visualization.ColumnChart(document.getElementById("directorOfBusinessChart")).draw(t,{width:"100%",fontSize:10,chartArea:{width:"60%",height:"75%"},vAxis:{minValue:0},colors:["#00A3D9"],animation:{startup:!0,duration:1e3,easing:"out"},legend:{position:"none"},backgroundColor:"#fff"}),$(".apply-filter-button").prop("disabled",!1),$(".apply-filter-button").html("apply"),$("#sidebarSubmitBtn").html('<i class="fas fa-sync-alt"></i>&nbsp;Apply Changes'),$("#sidebarSubmitBtn").prop("disabled",!1),$("#resetFilterToastBtn").prop("disabled",!1),$("#audienceSubmitBtn").prop("disabled",!1),$("#resetFilterToastBtn").html('<i class="fas fa-undo-alt"></i>&nbsp;Reset Filters')})},user_id_number=$("#user_id").val(),get_records_count=function(e){var t=$("#records-main-toast .toast-body"),a=$("#records-toast .toast-body"),r=$("#contacts-num-sidebar"),s=$("#numberOfContactsId");$.get("/api/meetpat-client/get-records/count",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){$("#loader").hide(),console.log(e)}).done(function(e){t.html(kFormatter(e)),r.html(kFormatter(e)),a.html(kFormatter(e)),s.val(e),$("#contacts-number .spinner-block").hide()})},get_municipalities=function(){$.get("/api/meetpat-client/get-records/municipalities",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){$("#loader").hide()}).done(function(e){$("#municipality-graph .spinner-block").hide(),$("#municipality_filter").empty(),drawMunicipalityChart(e),get_ages()})},get_provinces=function(){get_records_count(),$.get("/api/meetpat-client/get-records/provinces",{user_id:user_id_number,selected_provinces:target_provinces,selected_age_groups:target_ages,selected_gender_groups:target_genders,selected_population_groups:target_population_groups,selected_generations:target_generations,selected_marital_status:target_marital_statuses,selected_home_owners:target_home_owners,selected_risk_categories:target_risk_categories,selected_household_incomes:target_incomes,selected_directors:target_directors,selected_citizen_vs_residents:target_citizen_vs_residents,selected_municipalities:target_municipalities,selected_areas:target_areas},function(e){}).fail(function(e){$("#loader").hide(),console.log(e)}).done(function(e){$("#province_filter").empty();var t=function(e){var t;switch(e){case"G":t="Gauteng";break;case"WC":t="Western Cape";break;case"EC":t="Eastern Cape";break;case"M":t="Mpumalanga";break;case"NW":t="North West";break;case"FS":t="Free State";break;case"L":t="Limpopo";break;case"KN":t="KwaZulu Natal";break;case"NC":t="Northern Cape";break;default:t="Unknown"}return t};for(var a in e.all_provinces)target_provinces.includes(a)?$("#province_filter").append('<input type="checkbox" name="'+a+'" id="'+a.toLowerCase()+'_option" value="'+a+'" class="css-checkbox" checked="checked"><label for="'+a.toLowerCase()+'_option" class="css-label">'+t(a)+"</label><br />"):$("#province_filter").append('<input type="checkbox" name="'+a+'" id="'+a.toLowerCase()+'_option" value="'+a+'" class="css-checkbox"><label for="'+a.toLowerCase()+'_option" class="css-label">'+t(a)+"</label><br />"),$("#"+a.toLowerCase()+"_option").click(function(){if($("#"+$(this).attr("name").toLowerCase()+"_option").is(":checked")){var e=this;$("#province_filters").append('<li id="filter_p_'+$(this).attr("name").toLowerCase()+'">'+t($(this).val())+'<i class="fas fa-window-close float-right"></i></li>'),$("#filter_p_"+$(this).val().toLowerCase()+" i").click(function(){$("#"+$(e).val().toLowerCase()+"_option").length&&($("#filter_p_"+$(e).val().toLowerCase()).remove(),$("#"+$(e).val().toLowerCase()+"_option").prop("checked",!1)),checkForFilters()})}else $("#filter_p_"+$(this).val().toLowerCase())&&$("#filter_p_"+$(this).val().toLowerCase()).remove();checkForFilters()});drawProvinceChart(e.selected_provinces),drawMapChart(e.selected_provinces),get_municipalities()})},get_ages=function(){drawAgeChart(),get_genders()},get_genders=function(){drawGenderChart(),get_population_groups()},get_population_groups=function(){drawPopulationChart(),get_generations()},get_generations=function(){drawGenerationChart(),get_citizens_and_residents()},get_home_owner=function(){drawHomeOwnerChart(),get_risk_category()},get_household_income=function(){drawHouseholdIncomeChart(),get_director_of_business()},get_risk_category=function(){drawRiskCategoryChart(),get_household_income()},get_director_of_business=function(){drawDirectorOfBusinessChart()},get_citizens_and_residents=function(){drawCitizensChart(),get_marital_statuses()},get_marital_statuses=function(){drawMaritalStatusChart(),get_home_owner()},apply_filters=function(){$("#province-graph .spinner-block").show(),$("#provincesChart").empty(),$("#province_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#municipality-graph .spinner-block").show(),$("#municipalityChart").empty(),$("#map-graph .spinner-block").show(),$("#chartdiv").empty(),$("#area-graph .spinner-block").show(),$("#areasChart").empty(),$("#area_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#age-graph .spinner-block").show(),$("#agesChart").empty(),$("#age_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#gender-graph .spinner-block").show(),$("#genderChart").empty(),$("#gender_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#population-graph .spinner-block").show(),$("#populationGroupChart").empty(),$("#population_group_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#generation-graph .spinner-block").show(),$("#generationChart").empty(),$("#generation_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#c-vs-r-graph .spinner-block").show(),$("#citizensVsResidentsChart").empty(),$("#citizen_vs_resident_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#marital-status-graph .spinner-block").show(),$("#maritalStatusChart").empty(),$("#marital_status_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#home-owner-graph .spinner-block").show(),$("#homeOwnerChart").empty(),$("#home_owner_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#risk-category-graph .spinner-block").show(),$("#riskCategoryChart").empty(),$("#risk_category_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#income-graph .spinner-block").show(),$("#householdIncomeChart").empty(),$("#household_income_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#directors-graph .spinner-block").show(),$("#directorOfBusinessChart").empty(),$("#directors_filter").html('<div class="text-center"><div class="spinner-border mb-2" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#records-main-toast .toast-body").html('<div class="d-flex justify-content-center"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>'),$("#records-toast .toast-body").html('<div class="d-flex justify-content-center"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>')};$(".apply-filter-button, #sidebarSubmitBtn").click(function(){checkForFilters(),$(".apply-filter-button").prop("disabled",!0),$("#sidebarSubmitBtn").prop("disabled",!0),$("#audienceSubmitBtn").prop("disabled",!0),$(".apply-filter-button").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;applying...'),$("#sidebarSubmitBtn").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;Applying Changes...'),$("#resetFilterToastBtn").prop("disabled",!0),target_provinces=[],target_municipalities=[],target_areas=[],target_ages=[],target_genders=[],target_population_groups=[],target_generations=[],target_citizen_vs_residents=[],target_marital_statuses=[],target_home_owners=[],target_risk_categories=[],target_incomes=[],target_directors=[],$("#province-filter-form input[type='checkbox']").each(function(){this.checked&&target_provinces.push($(this).val())}),$("#age-filter-form input[type='checkbox']").each(function(){this.checked&&target_ages.push($(this).val())}),$("#gender-filter-form input[type='checkbox']").each(function(){this.checked&&target_genders.push($(this).val())}),$("#population-group-filter-form input[type='checkbox']").each(function(){this.checked&&target_population_groups.push($(this).val())}),$("#generation-filter-form input[type='checkbox']").each(function(){this.checked&&target_generations.push($(this).val())}),$("#marital-status-filter-form input[type='checkbox']").each(function(){this.checked&&target_marital_statuses.push($(this).val())}),$("#home-owner-filter-form input[type='checkbox']").each(function(){this.checked&&target_home_owners.push($(this).val())}),$("#risk-categories-filter-form input[type='checkbox']").each(function(){this.checked&&target_risk_categories.push($(this).val())}),$("#household-income-filter-form input[type='checkbox']").each(function(){this.checked&&target_incomes.push($(this).val())}),$("#directors-filter-form input[type='checkbox']").each(function(){this.checked&&target_directors.push($(this).val())}),$("#citizen-vs-resident-filter-form input[type='checkbox']").each(function(){this.checked&&target_citizen_vs_residents.push($(this).val())}),$("#municipality-filter-form input[type='checkbox']").each(function(){this.checked&&target_municipalities.push($(this).val())}),$("#area-filter-form input[type='checkbox']").each(function(){this.checked&&target_areas.push($(this).val())}),$("#provinceContactsId").val(target_provinces),$("#areaContactsId").val(target_areas),$("#AgeContactsId").val(target_ages),$("#GenderContactsId").val(target_genders),$("#populationContactsId").val(target_population_groups),$("#generationContactsId").val(target_generations),$("#citizenVsResidentsContactsId").val(target_citizen_vs_residents),$("#maritalStatusContactsId").val(target_marital_statuses),$("#homeOwnerContactsId").val(target_home_owners),$("#riskCategoryContactsId").val(target_risk_categories),$("#houseHoldIncomeContactsId").val(target_incomes),$("#directorsContactsId").val(target_directors),apply_filters(),get_provinces()}),$("#resetFilterToastBtn").click(function(){checkForFilters(),$("#resetFilterToastBtn").prop("disabled",!0),$("#resetFilterToastBtn").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;Resetting...'),$(".apply-filter-button, .apply-changes-button").prop("disabled",!0),$(".sidebar-filters ul li").remove(),target_provinces=[],target_municipalities=[],target_areas=[],target_ages=[],target_genders=[],target_population_groups=[],target_generations=[],target_citizen_vs_residents=[],target_marital_statuses=[],target_home_owners=[],target_risk_categories=[],target_incomes=[],target_directors=[],$("input:checkbox").each(function(e){$(e).is(":checked")&&$(e).prop("checked",!1)}),apply_filters(),get_provinces()}),$(document).ready(function(){$("#records-main-toast").toast("show"),$("#records-toast").toast("show"),$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu-form")&&e.stopPropagation()}),get_provinces(),$("#sidebar-toggle-button").click(function(){$(this).hasClass("sidebar-button-in")?$(this).html('<i class="fas fa-arrow-right"></i>'):$(this).html('<i class="fas fa-cog"></i>'),$("#right-options-sidebar").toggleClass("sidebar-in"),$("#sidebar-toggle-button").toggleClass("sidebar-button-in")})});